{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\it\\\\MyFirstProject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\it\\\\MyFirstProject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:\\\\it\\\\MyFirstProject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"C:\\\\it\\\\MyFirstProject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{profileAPI,usersAPI}from\"../API/API\";var ADD_POST='ADD-POST';var SET_USER_PROFILE='SET_USER_PROFILE';var SET_STATUS='SET_STATUS';var DELETE_POST='DELETE_POST';var initialState={posts:[{id:'user_1',message:'Hello world!',likesCount:'17'},{id:'user_2',message:'Hi all!',likesCount:'33'}],profile:null,status:''};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var newPost={id:'user_5',message:action.NewPostBody,likesCount:0};return _objectSpread({},state,{posts:[].concat(_toConsumableArray(state.posts),[newPost])});case SET_USER_PROFILE:return _objectSpread({},state,{profile:action.profile});case SET_STATUS:return _objectSpread({},state,{status:action.status});case DELETE_POST:return _objectSpread({},state,{posts:state.posts.filter(function(p){return p.id!=action.postId;})});default:return state;}};export var addPostActionCreator=function addPostActionCreator(NewPostBody){return{type:ADD_POST,NewPostBody:NewPostBody};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};export var getUserProfile=function getUserProfile(userId){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return usersAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUserProfile(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};export var getStatus=function getStatus(userId){return(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};export var updateStatus=function updateStatus(status){return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setStatus(status));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());};export default profileReducer;","map":{"version":3,"sources":["C:/it/MyFirstProject/src/redux/ProfileReducer.js"],"names":["profileAPI","usersAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","initialState","posts","id","message","likesCount","profile","status","profileReducer","state","action","type","newPost","NewPostBody","filter","p","postId","addPostActionCreator","setUserProfile","setStatus","deletePost","getUserProfile","userId","dispatch","getProfile","response","data","getStatus","updateStatus","resultCode"],"mappings":"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","sourcesContent":["import {profileAPI, usersAPI} from \"../API/API\";\r\n\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst DELETE_POST = 'DELETE_POST';\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 'user_1', message: 'Hello world!', likesCount: '17'},\r\n        {id: 'user_2', message: 'Hi all!', likesCount: '33'}\r\n    ],\r\n    profile: null,\r\n    status: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost = {\r\n                id: 'user_5',\r\n                message: action.NewPostBody,\r\n                likesCount: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n            }\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state, profile: action.profile\r\n\r\n            };\r\n        case SET_STATUS:\r\n            return {\r\n                ...state, status: action.status\r\n\r\n            };\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id != action.postId)\r\n\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\nexport const addPostActionCreator = (NewPostBody) => ({\r\n    type: ADD_POST, NewPostBody\r\n})\r\nexport const setUserProfile = (profile) => ({\r\n    type: SET_USER_PROFILE, profile\r\n})\r\nexport const setStatus = (status) => ({\r\n    type: SET_STATUS, status\r\n})\r\nexport const deletePost = (postId) => ({\r\n    type: DELETE_POST, postId\r\n})\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n    const response = await usersAPI.getProfile(userId)\r\n    dispatch(setUserProfile(response.data));\r\n}\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    const response = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(response.data));\r\n}\r\n\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    const response = await profileAPI.updateStatus(status)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status));\r\n    }\r\n}\r\n\r\n\r\nexport default profileReducer;"]},"metadata":{},"sourceType":"module"}